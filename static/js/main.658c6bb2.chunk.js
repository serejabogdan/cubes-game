(this["webpackJsonpcubes-game"]=this["webpackJsonpcubes-game"]||[]).push([[0],{20:function(t,e,n){},21:function(t,e,n){},28:function(t,e,n){},29:function(t,e,n){},30:function(t,e,n){},31:function(t,e,n){},32:function(t,e,n){},33:function(t,e,n){"use strict";n.r(e);var a=n(0),s=n(1),i=n.n(s),c=n(8),r=n.n(c),o=(n(20),n(21),n(2)),u=n(4),l=n(5),d=n(7),b=n(6),m=n(3),p="GAME_STATUS",h="POINT_INCREASE",j="TIME_UPDATE",f="GAME_RESET",O="GAME_PLAYER",v="MODAL_OPEN_STATUS",g="CHANGE_MAIN_CONTENT";function y(t){return{type:p,data:t}}function x(t){return{type:f,data:t}}n(28);var C=function(t){Object(d.a)(n,t);var e=Object(b.a)(n);function n(){var t;return Object(u.a)(this,n),(t=e.call(this)).interval=null,t}return Object(l.a)(n,[{key:"onStartGame",value:function(){var t=this;this.props.gameStatus({isGameStarted:!0,isGamePaused:!1});this.interval||(this.interval=setInterval((function(){return t.tick()}),1e3))}},{key:"onNewGame",value:function(){this.props.gameReset({points:0,timeLeft:60})}},{key:"onPause",value:function(){this.props.gameStatus({isGameStarted:!1,isGamePaused:!0}),this.timerStop()}},{key:"timerStop",value:function(){clearInterval(this.interval),this.interval=null}},{key:"tick",value:function(){this.props.timeLeft<=0?this.clear():this.props.timeUpdate({timeLeft:this.props.timeLeft-1})}},{key:"clear",value:function(){this.props.gameReset({isGameStarted:!1,isGamePaused:!1,timeLeft:60,isModalOpen:!0}),this.timerStop()}},{key:"gameStartButtons",value:function(){var t=this;if(this.props.mainContent)return this.props.isGameStarted?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("button",{type:"button",className:"buttons-start btn btn-success",onClick:function(){return t.onPause()},children:"Pause"}),Object(a.jsx)("button",{type:"button",className:"buttons-new-game btn btn-primary",onClick:function(){return t.onNewGame()},children:"New game"})]}):this.props.isGamePaused?Object(a.jsx)("button",{type:"button",className:"buttons-new-game btn btn-primary",onClick:function(){return t.onStartGame()},children:"Unpause"}):Object(a.jsx)("button",{type:"button",className:"buttons-start btn btn-success",onClick:function(){return t.onStartGame()},children:"Start"})}},{key:"onMainContent",value:function(t){this.props.changeMainContent({mainContent:t})}},{key:"gameOrResults",value:function(){var t=this;if(!this.props.isGameStarted)return this.props.mainContent?Object(a.jsx)("button",{type:"button",className:"'buttons-start btn btn-success",onClick:function(){return t.onMainContent(!1)},children:"Results"}):Object(a.jsx)("button",{type:"button",className:"buttons-new-game btn btn-primary",onClick:function(){return t.onMainContent(!0)},children:"Game"})}},{key:"timeUpdateOutput",value:function(){return this.props.timeLeft>59?"01:00":this.props.timeLeft<10?"00:0".concat(this.props.timeLeft):"00:".concat(this.props.timeLeft)}},{key:"render",value:function(){return Object(a.jsxs)("div",{className:"header",children:[Object(a.jsx)("h1",{children:"Cubes game"}),Object(a.jsxs)("div",{className:"header__game-control",children:[Object(a.jsxs)("div",{className:"header__buttons buttons",children:[this.gameStartButtons(),this.gameOrResults()]}),Object(a.jsxs)("div",{className:"header__game-info info",children:[Object(a.jsxs)("div",{className:"info__points",children:[Object(a.jsx)("span",{children:"Points"}),Object(a.jsx)("div",{className:"info__output form-control",children:this.props.points})]}),Object(a.jsxs)("div",{className:"info__time",children:[Object(a.jsx)("span",{children:"Time left"}),Object(a.jsx)("div",{className:"info__output form-control",children:this.timeUpdateOutput()})]})]})]})]})}}]),n}(i.a.Component),k={gameStatus:y,gameReset:x,timeUpdate:function(t){return{type:j,data:t}},modalOpenStatus:function(t){return{type:v,data:t}},changeMainContent:function(t){return{type:g,data:t}}},N=Object(m.b)((function(t){return Object(o.a)({},t)}),k)(C),S=(n(29),function(t){Object(d.a)(n,t);var e=Object(b.a)(n);function n(){var t;return Object(u.a)(this,n),(t=e.call(this)).state={cubes:[]},t.playground=i.a.createRef(),t}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var t=this.generateCubes();this.setState((function(e){return Object(o.a)(Object(o.a)({},e),{},{cubes:t})}))}},{key:"generateCubes",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6,e=[],n=0;n<t;n++){var a=this.getColorStyle();e.push({colorCube:a,cube:this.getCube(a)})}return e}},{key:"getPlaygroundSizes",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:40;return{width:this.playground.current.offsetWidth-t,height:this.playground.current.offsetHeight-t}}},{key:"getCube",value:function(t){var e=this,n=this.getPlaygroundSizes(),s=n.width,i=n.height,c={left:this.getRandom(s),top:this.getRandom(i),backgroundColor:"#".concat(t)};return Object(a.jsx)("div",{className:"cube",style:c,onClick:function(){e.onDeleteCube(t),e.generateNewCubes(),e.score\u0421alculation()}},t)}},{key:"score\u0421alculation",value:function(){this.props.pointIncrease({points:this.props.points+1})}},{key:"onDeleteCube",value:function(t){this.setState((function(e){return Object(o.a)(Object(o.a)({},e),{},{cubes:e.cubes.filter((function(e){return e.colorCube!==t}))})}))}},{key:"getColorStyle",value:function(){return this.getRandom(1e6)}},{key:"getRandom",value:function(t){return Math.round(Math.random()*t)}},{key:"getAmountNewCubes",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return Math.floor(Math.random()*e+t)}},{key:"generateNewCubes",value:function(){if(!(this.state.cubes.length>3)){var t=this.getAmountNewCubes(1,3),e=this.generateCubes(t);this.setState((function(t){return Object(o.a)(Object(o.a)({},t),{},{cubes:e.concat(t.cubes)})}))}}},{key:"render",value:function(){return Object(a.jsx)("div",{className:"playground",ref:this.playground,children:this.props.isGameStarted&&this.state.cubes.map((function(t){return t.cube}))})}}]),n}(i.a.Component)),M={pointIncrease:function(t){return{type:h,data:t}},gameStatus:y},G=Object(m.b)((function(t){return Object(o.a)({},t)}),M)(S),_=function(t){return JSON.parse(localStorage.getItem(t))},P=(n(30),function(){return Object(a.jsxs)("div",{className:"results",children:[Object(a.jsx)("h2",{children:"results"}),Object(a.jsxs)("table",{className:"table table-bordered",children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{children:"#"}),Object(a.jsx)("th",{children:"Nickname"}),Object(a.jsx)("th",{children:"Points"})]})}),Object(a.jsx)("tbody",{children:function(){var t=_("players")||[];return t.sort((function(t,e){return e.points-t.points})),t.map((function(t,e){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{scope:"row",children:e+1}),Object(a.jsx)("td",{children:t.nickname}),Object(a.jsx)("td",{children:t.points})]},"".concat(t.nickname).concat(t.points))}))}()})]})]})}),E=(n(31),Object(m.b)((function(t){return{mainContent:t.mainContent}}))((function(t){return Object(a.jsx)("div",{className:"main",children:t.mainContent?Object(a.jsx)(G,{}):Object(a.jsx)(P,{})})}))),w=(n(32),function(t){Object(d.a)(n,t);var e=Object(b.a)(n);function n(){var t;return Object(u.a)(this,n),(t=e.call(this)).onChangeNickname=function(e){var n=e.target.value;t.setState((function(t){return Object(o.a)(Object(o.a)({},t),{},{nickname:n})}))},t.onSavePlayer=function(){t.props.gamePlayer({player:t.state.nickname});var e=_("players")||[],n={nickname:t.state.nickname,points:t.props.points};e.push(n),function(t,e){localStorage.setItem(t,JSON.stringify(e))}("players",e),t.onModalClose()},t.onModalClose=function(){t.props.gameReset({points:0,isModalOpen:!1})},t.state={nickname:""},t}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.setState({nickname:this.props.player})}},{key:"render",value:function(){return Object(a.jsx)("div",{className:"modal",id:"exampleModalCentered",role:"dialog",children:Object(a.jsx)("div",{className:"modal-dialog modal-dialog-centered",role:"document",children:Object(a.jsxs)("div",{className:"modal-content",children:[Object(a.jsxs)("div",{className:"modal-header",children:[Object(a.jsxs)("h5",{className:"modal-title",id:"exampleModalCenteredLabel",children:["You got ",this.props.points," points."]}),Object(a.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:this.onModalClose,children:Object(a.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(a.jsx)("div",{className:"modal-body",children:Object(a.jsx)("form",{children:Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"formGroupExampleInput",children:"Enter your nickname"}),Object(a.jsx)("input",{type:"text",className:"form-control",id:"formGroupExampleInput",placeholder:"Your nickname",onChange:this.onChangeNickname,value:this.state.nickname})]})})}),Object(a.jsxs)("div",{className:"modal-footer",children:[Object(a.jsx)("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal",onClick:this.onModalClose,children:"Close"}),Object(a.jsx)("button",{type:"button",className:"btn btn-primary",onClick:this.onSavePlayer,children:"Save changes"})]})]})})})}}]),n}(i.a.Component)),R={gameReset:x,gamePlayer:function(t){return{type:O,data:t}}},L=Object(m.b)((function(t){return{points:t.points,player:t.player}}),R)(w);var A=Object(m.b)((function(t){return{isModalOpen:t.isModalOpen}}),null)((function(t){return Object(a.jsxs)("div",{className:"App container",children:[t.isModalOpen&&Object(a.jsx)(L,{}),Object(a.jsx)(N,{}),Object(a.jsx)(E,{})]})})),I=n(9),T={isGameStarted:!1,isGamePaused:!1,points:0,timeLeft:60,player:"",isModalOpen:!1,mainContent:!0},U=Object(I.b)((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case j:return Object(o.a)(Object(o.a)({},t),{},{timeLeft:e.data.timeLeft});case h:return Object(o.a)(Object(o.a)({},t),{},{points:e.data.points});case p:case f:return Object(o.a)(Object(o.a)({},t),e.data);case O:return Object(o.a)(Object(o.a)({},t),{},{player:e.data.player});case v:return Object(o.a)(Object(o.a)({},t),{},{isModalOpen:e.data.isModalOpen});case g:return Object(o.a)(Object(o.a)({},t),{},{mainContent:e.data.mainContent});default:return t}})),D=Object(a.jsx)(i.a.StrictMode,{children:Object(a.jsx)(m.a,{store:U,children:Object(a.jsx)(A,{})})});r.a.render(D,document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.658c6bb2.chunk.js.map